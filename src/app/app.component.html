<header class="topbar d-flex justify-content-between align-items-center p-3 text-white">
  <h1 class="title mb-0">
    <img src="/promptify-logo-removebg-preview.png" alt="Promptify Logo" width="180" />
  </h1>

  <button
    class="menu-btn"
    (click)="toggleSidebar()"
    [class.open]="!sidebarCollapsed"
  >
    <span></span><span></span><span></span>
  </button>
</header>

<div class="d-flex">
  <!-- Sidebar -->
  <aside class="sidebar panel"  [class.collapsed]="sidebarCollapsed">
    <div class="sidebar-inner" >
      <app-model-selector
        [models]="models"
        [selected]="selectedModel"
        (select)="getSelectedModel($event)"
      ></app-model-selector>

      <hr />

      <app-parameters-panel
        [(temperature)]="temperature"
        [(maxTokens)]="maxTokens"
        class="mt-3"
      ></app-parameters-panel>

      <hr />

      <h5 class="templates-title" *ngIf="objectKeys(templates).length">Templates</h5>
      <div *ngFor="let k of objectKeys(templates)">
        <button
          class="template-btn"
          (click)="promptEditor.loadTemplate(templates[k])"
        >
          <span class="template-name">{{ k }}</span>
          <span class="template-arrow">âžœ</span>
        </button>
      </div>

      <hr *ngIf="objectKeys(templates).length" />

      <div class="theme-toggle-row">
        <span>Theme</span>
        <app-theme-toggle></app-theme-toggle>
      </div>
      
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content flex-grow-1 d-flex flex-wrap" [class.sidebar-open]="!sidebarCollapsed">
    <!-- Chat Area -->
    <div class="chat-pane" [class.split]="isDocumentAnalyzerOpen">
      <app-chat-output
        [messages]="messages"
        [loading]="loading"
        (download)="onDownload()"
        (copy)="onCopy($event)"
        (send)="onSend($event)"
      ></app-chat-output>

      <app-prompt-editor
        #promptEditor
        (send)="onSend($event)"
        (saveTemplate)="onSaveTemplate($event.name, $event.text)"
        (toggleDocumentAnalyzer)="openDocumentAnalyzer()"
        (downloadJSON)="onDownload()"
        (clearChat)="clearChat()"
        [loading]="loading"
        class="mb-2 me-2 px-3"
      ></app-prompt-editor>
    </div>

    <!-- Doc Analyzer -->
    <div class="doc-pane" *ngIf="isDocumentAnalyzerOpen">
      <app-doc-analyzer
        (pdfDataChange)="onPdfDataReceived($event)"
        (toggleDocumentAnalyzer)="openDocumentAnalyzer()"
        
      ></app-doc-analyzer>
    </div>
  </main>
</div>
